# Системы обработки сигналов

Теория сложных технических систем выделяет следующие существенные
части систем обработки сигналов:
- входы;
- выходы;
- компоненты;
- связи (входов/выходов системы со входами/выходами компонентов 
  и компонентов между собой).

Связи передают сигналы без изменений. Компоненты получают
сигналы на входы и выдают новые сигналы на выходы.

Такая абстракция является масштабируемой, т.к. сама система может 
выступать в роли компонента системы верхнего уровня.

Также такая абстракция не накладывает ограничений на способы связи
компонентов. Допускаются последовательное, параллельное соединения, 
обратные связи.

## Совместимость с трансдьюсерами

Компонент, имеющий один вход и один выход, может быть реализован 
трансдьюсером.

Система, имеющий один вход и один выход, может быть использована
в качестве обычного трансдьюсера.

## Семантика вычислений

Сигнал — значение в определённой точке системы в
определённый момент времени. Точками системы служат входы/выходы
компонентов, либо просто обособленные точки, служащие опорой для связей.
В терминологии SynapseGrid - это контакты.

Распространение сигналов в системе описывается моделью сети Петри.
Каждый сигнал рассматривается как фишка. На каждом такте дискретного 
времени фишки-сигналы передвигаются по связям и компонентам. Например,
если в момент `t` сигнал находился на входе компонента `A`, 
то в момент `t+1` новый сигнал появится на выходе компонента `A`. 
(В зависимости от логики работы компонента, на выходе может появиться 
несколько сигналов или даже 0 сигналов.)

### Параллельное исполнение

Важным вопросом является организация вычислений в случае, если 
структура системы допускает параллельное исполнение. 
Здесь можно предложить два варианта — детерминированная 
и недетерминированная семантики. В библиотеке fs2 детерминированности
можно добиться, например, если перейти к обработке кортежей.
При этом обязательно на каждом шаге обрабатывать каждый элемент кортежа.

Недетерминированная семантика обеспечивается исполнением параллельных
ветвей в логических потоках (green threads, fibers, actors).

### Треллис

Состояние вычисления в системе описывается совокупностью сигналов,
находящихся на всех контактах системы. (А также значениями всех 
переменных состояния в тот же момент времени.)
Один шаг дискретного времени порождает новое распределение сигналов 
на контактах согласно семантике вычислений. 
Представим себе диаграмму ("график") состояний системы во времени. 
По оси абсцисс отложим дискретное время, а по оси ординат —
все контакты системы. На пересечениях будем помещать 
"фишки", соответствующие сигналам. 
Так как сигналы в каждый следующий момент времени порождаются сигналами 
в текущий момент времени, то соединим соответствующие 
сигналы стрелочками. Такую диаграмму будем называть "треллис".

Треллис иллюстрирует динамику распространения сигналов в системе.

С точки зрения вычислений в системе треллис можно построить,
выполняя вычисления шаг за шагом — для всех сигналов, имеющихся 
в начальный момент времени, вычислить порождённые сигналы, 
доступные в следующий момент времени. И повторять это действие 
до выполнения условия окончания. А именно, когда все сигналы на 
входных и внутренних контактах будут обработаны. 
В системе без циклов гарантируется завершение за конечное число шагов.
Если в системе имеются обратные связи, то завершение в общем случае
не гарантируется.
